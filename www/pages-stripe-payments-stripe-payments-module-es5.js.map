{"version":3,"sources":["webpack:///src/app/pages/stripe-payments/stripe-payments.page.ts","webpack:///src/app/pages/stripe-payments/stripe-payments.page.html","webpack:///src/app/pages/stripe-payments/stripe-payments.page.scss","webpack:///src/app/pages/stripe-payments/stripe-payments-routing.module.ts","webpack:///src/app/pages/stripe-payments/stripe-payments.module.ts"],"names":["StripePaymentsPage","router","api","util","navCtrl","cards","totalPrice","totalItem","serviceTax","deliveryCharge","grandTotal","venueFCM","vid","payKey","cart","httpGet","cid","subscribe","hide","console","log","data","card_token","id","error","message","showErrorAlert","errorToast","translate","show","localStorage","getItem","getProfile","then","getCards","JSON","parse","foods","filter","x","quantiy","recheck","add","getVenueUser","fcm_token","navigate","address","deliveryAddress","coupon","undefined","calculate","item","forEach","element","selectedItem","length","subPrice","subItems","realsItems","value","total","parseFloat","price","parseInt","push","removeItem","setItem","stringify","toFixed","tax","code","min","type","percentage","num","per","discout","dicount","lng","selectedCity","clear","fire","title","text","icon","confirmButtonText","cancelButtonText","showCancelButton","backdrop","background","options","amount","currency","customer","card","url","httpPost","showToast","createOrder","degrees","Math","PI","lat1","lon1","lat2","lon2","earthRadiusKm","dLat","degreesToRadians","dLon","a","sin","cos","c","atan2","sqrt","checkAuth","addressId","makeid","newAddress","uid","lat","house","landmark","addNewAddress","param","userId","orderId","order","time","format","status","restId","paid","paykey","appliedCoupon","couponId","sendNotification","navigateRoot","getCurrecySymbol","selector","template","routes","path","component","StripePaymentsPageRoutingModule","imports","forChild","exports","StripePaymentsPageModule","declarations"],"mappings":"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","file":"pages-stripe-payments-stripe-payments-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApisService } from 'src/app/services/apis.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport * as  moment from 'moment';\nimport swal from 'sweetalert2';\nimport { NavController } from '@ionic/angular';\n@Component({\n  selector: 'app-stripe-payments',\n  templateUrl: './stripe-payments.page.html',\n  styleUrls: ['./stripe-payments.page.scss'],\n})\nexport class StripePaymentsPage implements OnInit {\n  cid: any;\n  cards: any[] = [];\n  card_token: any;\n  totalPrice: any = 0;\n  totalItem: any = 0;\n  serviceTax: any = 0;\n  deliveryCharge: any = 5;\n  grandTotal: any = 0;\n  deliveryAddress: any;\n  venueFCM: any = '';\n  vid: any = '';\n  payKey: any = '';\n  coupon: any;\n  dicount: any;\n  cart: any[] = [];\n  constructor(\n    private router: Router,\n    private api: ApisService,\n    private util: UtilService,\n    private navCtrl: NavController,\n  ) { }\n\n  getCards() {\n    this.api.httpGet('https://api.stripe.com/v1/customers/' + this.cid + '/sources?object=card').subscribe((cards: any) => {\n      this.util.hide();\n      console.log(cards);\n      if (cards && cards.data) {\n        this.cards = cards.data;\n        this.card_token = this.cards[0].id;\n      }\n    }, (error) => {\n      this.util.hide();\n      console.log(error);\n      this.util.hide();\n      if (error && error.error && error.error.error && error.error.error.message) {\n        this.util.showErrorAlert(error.error.error.message);\n        return false;\n      }\n      this.util.errorToast(this.util.translate('Something went wrong'));\n    });\n  }\n\n  getProfile() {\n    this.util.show();\n    console.log('loca', localStorage.getItem('uid'));\n    this.api.getProfile(localStorage.getItem('uid')).then((data: any) => {\n      console.log('data', data);\n      if (data && data.cid) {\n        this.cid = data.cid;\n        this.getCards();\n      } else {\n        this.util.hide();\n      }\n    }, error => {\n      console.log(error);\n      this.util.hide();\n      this.util.errorToast(this.util.translate('Something went wrong'));\n    }).catch(error => {\n      console.log(error);\n      this.util.hide();\n      this.util.errorToast(this.util.translate('Something went wrong'));\n    });\n  }\n\n\n  async ngOnInit() {\n    const foods = await JSON.parse(localStorage.getItem('foods'));\n    let recheck = await foods.filter(x => x.quantiy > 0);\n    console.log(recheck);\n    const add = JSON.parse(localStorage.getItem('deliveryAddress'));\n    this.vid = localStorage.getItem('vid');\n    this.api.getVenueUser(this.vid).then((data) => {\n      console.log('venue', data);\n      if (data && data.fcm_token) {\n        this.venueFCM = data.fcm_token;\n      }\n    }, error => {\n      this.util.errorToast(this.util.translate('Something went wrong'));\n      this.router.navigate(['tabs']);\n    }).catch(error => {\n      this.util.errorToast(this.util.translate('Something went wrong'));\n      this.router.navigate(['tabs']);\n      console.log(error);\n    });\n    if (add && add.address) {\n      this.deliveryAddress = add;\n    }\n    this.coupon = JSON.parse(localStorage.getItem('coupon'));\n    const cart = localStorage.getItem('userCart');\n    try {\n      if (cart && cart !== 'null' && cart !== undefined && cart !== 'undefined') {\n        this.cart = JSON.parse(localStorage.getItem('userCart'));\n        this.calculate();\n      } else {\n        this.cart = [];\n      }\n    } catch (error) {\n      console.log(error);\n      this.cart = [];\n    }\n  }\n\n  async calculate() {\n    console.log('cart--->,', this.cart);\n    // new\n    let item = this.cart.filter(x => x.quantiy > 0);\n    this.cart.forEach(element => {\n      if (element.quantiy === 0) {\n        element.selectedItem = [];\n      }\n    });\n    console.log('item=====>>', item);\n    this.totalPrice = 0;\n    this.totalItem = 0;\n    this.cart = [];\n    console.log('cart emplth', this.cart, item);\n    item.forEach(element => {\n      this.totalItem = this.totalItem + element.quantiy;\n      console.log('itemsss----->>>', element);\n      if (element && element.selectedItem && element.selectedItem.length > 0) {\n        let subPrice = 0;\n        element.selectedItem.forEach(subItems => {\n          subItems.item.forEach(realsItems => {\n            subPrice = subPrice + (realsItems.value);\n          });\n          subPrice = subPrice * subItems.total;\n        });\n        this.totalPrice = this.totalPrice + subPrice;\n        // this.totalPrice = this.totalPrice + (subPrice * parseInt(element.quantiy));\n      } else {\n        this.totalPrice = this.totalPrice + (parseFloat(element.price) * parseInt(element.quantiy));\n      }\n      this.cart.push(element);\n    });\n    localStorage.removeItem('userCart');\n    console.log('carrrrrrr---->>>', this.cart);\n    localStorage.setItem('userCart', JSON.stringify(this.cart));\n    this.totalPrice = parseFloat(this.totalPrice).toFixed(2);\n    // new\n\n    console.log('total item', this.totalItem);\n    console.log('=====>', this.totalPrice);\n    const tax = (parseFloat(this.totalPrice) * 21) / 100;\n    this.serviceTax = tax.toFixed(2);\n    console.log('tax->', this.serviceTax);\n    this.deliveryCharge = 5;\n    this.grandTotal = parseFloat(this.totalPrice) + parseFloat(this.serviceTax) + parseFloat(this.deliveryCharge);\n    this.grandTotal = this.grandTotal.toFixed(2);\n    if (this.coupon && this.coupon.code && this.totalPrice >= this.coupon.min) {\n      if (this.coupon.type === '%') {\n        console.log('per');\n        function percentage(num, per) {\n          return (num / 100) * per;\n        }\n        const totalPrice = percentage(parseFloat(this.totalPrice).toFixed(2), this.coupon.discout);\n        console.log('============>>>>>>>>>>>>>>>', totalPrice);\n        this.dicount = totalPrice.toFixed(2);\n        this.totalPrice = parseFloat(this.totalPrice) - totalPrice;\n        console.log('------------>>>>', this.totalPrice);\n        this.totalPrice = parseFloat(this.totalPrice).toFixed(2);\n        const tax = (parseFloat(this.totalPrice) * 21) / 100;\n        this.serviceTax = tax.toFixed(2);\n        console.log('tax->', this.serviceTax);\n        this.deliveryCharge = 5;\n        this.grandTotal = parseFloat(this.totalPrice) + parseFloat(this.serviceTax) + parseFloat(this.deliveryCharge);\n        this.grandTotal = this.grandTotal.toFixed(2);\n      } else {\n        console.log('$');\n        const totalPrice = parseFloat(this.totalPrice) - this.coupon.discout;\n        console.log('============>>>>>>>>>>>>>>>', totalPrice);\n        this.dicount = this.coupon.discout;\n        this.totalPrice = totalPrice;\n        console.log('------------>>>>', this.totalPrice);\n        this.totalPrice = parseFloat(this.totalPrice).toFixed(2);\n        const tax = (parseFloat(this.totalPrice) * 21) / 100;\n        this.serviceTax = tax.toFixed(2);\n        console.log('tax->', this.serviceTax);\n        this.deliveryCharge = 5;\n        this.grandTotal = parseFloat(this.totalPrice) + parseFloat(this.serviceTax) + parseFloat(this.deliveryCharge);\n        this.grandTotal = this.grandTotal.toFixed(2);\n      }\n    } else {\n      console.log('not satisfied');\n      this.coupon = null;\n      localStorage.removeItem('coupon');\n    }\n    console.log('grand totla', this.grandTotal);\n    if (this.totalItem === 0) {\n      const lng = localStorage.getItem('language');\n      const selectedCity = localStorage.getItem('selectedCity');\n      await localStorage.clear();\n      localStorage.setItem('language', lng);\n      localStorage.setItem('selectedCity', selectedCity);\n      this.totalItem = 0;\n      this.totalPrice = 0;\n    }\n  }\n\n  /// OLD calc\n  // async calculate(foods) {\n  //   console.log(foods);\n  //   let item = foods.filter(x => x.quantiy > 0);\n  //   console.log(item);\n  //   this.totalPrice = 0;\n  //   this.totalItem = 0;\n  //   await item.forEach(element => {\n  //     this.totalItem = this.totalItem + element.quantiy;\n  //     this.totalPrice = this.totalPrice + (parseFloat(element.price) * parseInt(element.quantiy));\n  //   });\n  //   this.totalPrice = parseFloat(this.totalPrice).toFixed(2);\n  //   console.log('total item', this.totalItem);\n  //   console.log('=====>', this.totalPrice);\n  //   const tax = (parseFloat(this.totalPrice) * 21) / 100;\n  //   this.serviceTax = tax.toFixed(2);\n  //   console.log('tax->', this.serviceTax);\n  //   this.deliveryCharge = 5;\n  //   this.grandTotal = parseFloat(this.totalPrice) + parseFloat(this.serviceTax) + parseFloat(this.deliveryCharge);\n  //   this.grandTotal = this.grandTotal.toFixed(2);\n  //   console.log('grand totla', this.grandTotal);\n  //   if (this.coupon && this.coupon.code && this.totalPrice >= this.coupon.min) {\n  //     if (this.coupon.type === '%') {\n  //       console.log('per');\n  //       function percentage(totalValue, partialValue) {\n  //         return (100 * partialValue) / totalValue;\n  //       }\n  //       const totalPrice = percentage(parseFloat(this.totalPrice).toFixed(2), this.coupon.discout);\n  //       console.log('============>>>>>>>>>>>>>>>', totalPrice);\n  //       this.dicount = totalPrice.toFixed(2);\n  //       this.totalPrice = parseFloat(this.totalPrice) - totalPrice;\n  //       console.log('------------>>>>', this.totalPrice);\n  //       this.totalPrice = parseFloat(this.totalPrice).toFixed(2);\n  //       const tax = (parseFloat(this.totalPrice) * 21) / 100;\n  //       this.serviceTax = tax.toFixed(2);\n  //       console.log('tax->', this.serviceTax);\n  //       this.deliveryCharge = 5;\n  //       this.grandTotal = parseFloat(this.totalPrice) + parseFloat(this.serviceTax) + parseFloat(this.deliveryCharge);\n  //       this.grandTotal = this.grandTotal.toFixed(2);\n  //     } else {\n  //       console.log('$');\n  //       console.log('per');\n  //       const totalPrice = parseFloat(this.totalPrice) - this.coupon.discout;\n  //       console.log('============>>>>>>>>>>>>>>>', totalPrice);\n  //       this.dicount = this.coupon.discout;\n  //       this.totalPrice = parseFloat(this.totalPrice) - totalPrice;\n  //       console.log('------------>>>>', this.totalPrice);\n  //       this.totalPrice = parseFloat(this.totalPrice).toFixed(2);\n  //       const tax = (parseFloat(this.totalPrice) * 21) / 100;\n  //       this.serviceTax = tax.toFixed(2);\n  //       console.log('tax->', this.serviceTax);\n  //       this.deliveryCharge = 5;\n  //       this.grandTotal = parseFloat(this.totalPrice) + parseFloat(this.serviceTax) + parseFloat(this.deliveryCharge);\n  //       this.grandTotal = this.grandTotal.toFixed(2);\n  //     }\n  //   } else {\n  //     console.log('not satisfied');\n  //     this.coupon = null;\n  //     localStorage.removeItem('coupon');\n  //   }\n  // }\n\n  // OLD calc\n\n  payment() {\n    console.log('place order');\n\n    swal.fire({\n      title: this.util.translate('Are you sure?'),\n      text: this.util.translate('Orders once placed cannot be cancelled and are non-refundable'),\n      icon: 'question',\n      confirmButtonText: this.util.translate('Yes'),\n      cancelButtonText: this.util.translate('cancel'),\n      showCancelButton: true,\n      backdrop: false,\n      background: 'white'\n    }).then((data) => {\n      console.log(data);\n      if (data && data.value) {\n        console.log('go to procesed');\n        const options = {\n          amount: parseInt(this.grandTotal) * 100,\n          currency: 'inr',\n          customer: this.cid,\n          card: this.card_token,\n        };\n        console.log('options', options);\n        const url = 'https://api.stripe.com/v1/charges';\n        this.util.show();\n        this.api.httpPost(url, options).subscribe((data: any) => {\n          console.log('------------------------->', data);\n          this.payKey = data.id;\n          this.util.hide();\n          this.util.showToast(this.util.translate('Payment Success'), 'success', 'bottom');\n          this.createOrder();\n        }, (error) => {\n          this.util.hide();\n          console.log(error);\n          this.util.hide();\n          if (error && error.error && error.error.error && error.error.error.message) {\n            this.util.showErrorAlert(error.error.error.message);\n            return false;\n          }\n          this.util.errorToast('Something went wrong');\n        });\n      }\n    });\n  }\n\n  degreesToRadians(degrees) {\n    return degrees * Math.PI / 180;\n  }\n\n  distanceInKmBetweenEarthCoordinates(lat1, lon1, lat2, lon2) {\n    console.log(lat1, lon1, lat2, lon2);\n    const earthRadiusKm = 6371;\n    const dLat = this.degreesToRadians(lat2 - lat1);\n    const dLon = this.degreesToRadians(lon2 - lon1);\n    lat1 = this.degreesToRadians(lat1);\n    lat2 = this.degreesToRadians(lat2);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return earthRadiusKm * c;\n  }\n  async createOrder() {\n    this.util.show('creating order');\n    this.api.checkAuth().then(async (data: any) => {\n      console.log(data);\n      if (data) {\n        // not from saved address then create new and save\n        if (!this.deliveryAddress.id || this.deliveryAddress.id === '') {\n          const addressId = this.util.makeid(10);\n          const newAddress = {\n            id: addressId,\n            uid: data.uid,\n            address: this.deliveryAddress.address,\n            lat: this.deliveryAddress.lat,\n            lng: this.deliveryAddress.lng,\n            title: 'home',\n            house: '',\n            landmark: ''\n          };\n          await this.api.addNewAddress(data.uid, addressId, newAddress).then((data) => {\n            this.deliveryAddress.id = addressId;\n          }, error => {\n            console.log(error);\n          }).catch(error => {\n            console.log(error);\n          });\n        }\n        // const foods = await JSON.parse(localStorage.getItem('foods'));\n        // let recheck = await foods.filter(x => x.quantiy > 0);\n        // console.log('ordered food', recheck);\n        let id = this.util.makeid(10);\n        await localStorage.removeItem('foods');\n        await localStorage.removeItem('vid');\n        await localStorage.removeItem('totalItem');\n        const uid = localStorage.getItem('uid');\n        const lng = localStorage.getItem('language');\n        const selectedCity = localStorage.getItem('selectedCity');\n        await localStorage.clear();\n        localStorage.setItem('uid', uid);\n        localStorage.setItem('language', lng);\n        localStorage.setItem('selectedCity', selectedCity);\n        const param = {\n          uid: data.uid,\n          userId: data.uid,\n          orderId: id,\n          vid: this.vid,\n          order: JSON.stringify(this.cart),\n          time: moment().format('llll'),\n          address: this.deliveryAddress,\n          total: this.totalPrice,\n          grandTotal: this.grandTotal,\n          serviceTax: this.serviceTax,\n          deliveryCharge: 5,\n          status: 'created',\n          restId: this.vid,\n          paid: 'stripe',\n          paykey: this.payKey,\n          appliedCoupon: this.coupon ? true : false,\n          couponId: this.coupon ? this.coupon.id : 'NA',\n          coupon: this.coupon ? JSON.stringify(this.coupon) : 'NA',\n          dicount: this.coupon ? this.dicount : 0\n        };\n        console.log('sent', param);\n        this.api.createOrder(id, param).then(async (data) => {\n          this.util.hide();\n          if (this.venueFCM && this.venueFCM !== '') {\n            this.api.sendNotification(this.util.translate('New Order Received'),\n              this.util.translate('New Order'), this.venueFCM).subscribe((data) => {\n                console.log('send notifications', data);\n              }, error => {\n                console.log(error);\n              });\n          }\n          swal.fire({\n            title: this.util.translate('Success'),\n            text: this.util.translate('Your is created succesfully'),\n            icon: 'success',\n            backdrop: false,\n          });\n          this.navCtrl.navigateRoot(['tabs/tab2']);\n          console.log(data);\n        }, error => {\n          this.util.hide();\n          this.util.errorToast(this.util.translate('Something went wrong'));\n          this.router.navigate(['tabs']);\n        }).catch(error => {\n          this.util.hide();\n          this.util.errorToast(this.util.translate('Something went wrong'));\n          this.router.navigate(['tabs']);\n          console.log(error);\n        });\n      } else {\n        this.util.hide();\n        this.util.errorToast(this.util.translate('Session expired'));\n        this.router.navigate(['login']);\n      }\n\n    }, error => {\n      this.util.hide();\n      this.util.errorToast(this.util.translate('Session expired'));\n      this.router.navigate(['login']);\n    }).catch(error => {\n      this.util.hide();\n      this.util.errorToast(this.util.translate('Session expired'));\n      this.router.navigate(['login']);\n      console.log(error);\n    });\n\n  }\n\n  ionViewWillEnter() {\n    this.getProfile();\n  }\n\n  onAdd() {\n    this.router.navigate(['add-card']);\n  }\n  changeMethod(id) {\n    this.card_token = id;\n  }\n\n  getCurrency() {\n    return this.util.getCurrecySymbol();\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button mode=\\\"md\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{'Pay with' | translate}} Stripe</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"onAdd()\\\">\\n        <ion-icon slot=\\\"end\\\" name=\\\"add\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"div_content\\\">\\n    <div *ngIf=\\\"!cards?.length\\\">\\n      <p class=\\\"ion-text-center\\\">{{'No Card Found Please Add Card' | translate}}</p>\\n    </div>\\n    <ion-radio-group [(ngModel)]=\\\"card_token\\\">\\n      <ion-item class=\\\"div_inner\\\" lines=\\\"none\\\" *ngFor=\\\"let card of cards;let i = index\\\">\\n        <ion-thumbnail slot=\\\"end\\\">\\n          <img src=\\\"assets/visa.png\\\" class=\\\"img_visa\\\" />\\n        </ion-thumbnail>\\n        <ion-radio (ionSelect)=\\\"changeMethod(card.id)\\\" [value]=\\\"card.id\\\" slot=\\\"start\\\"></ion-radio>\\n        <ion-label>XXXX{{card.last4}} <br> Expiry {{card.exp_month}} / {{card.exp_year}}</ion-label>\\n      </ion-item>\\n    </ion-radio-group>\\n    <ion-button expand=\\\"block\\\" *ngIf=\\\"cards?.length\\\" class=\\\"btn_addcard\\\" (click)=\\\"payment()\\\">{{'Payment' | translate}}\\n      {{getCurrency()}}\\n      {{grandTotal}}\\n    </ion-button>\\n\\n  </div>\\n</ion-content>\";","export default \".btn_right {\\n  position: relative;\\n  z-index: 999999;\\n}\\n\\n.img_menu {\\n  width: 17px;\\n  position: absolute;\\n  right: 20px;\\n}\\n\\n.div_content {\\n  width: 100%;\\n  padding-left: 20px;\\n  padding-right: 20px;\\n}\\n\\n.div_content .div_inner {\\n  width: 100%;\\n  margin-top: 15px;\\n  padding-bottom: 15px;\\n}\\n\\n.div_content .div_inner .r {\\n  position: absolute;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n.div_content .div_inner .lbl_number {\\n  display: block;\\n  font-size: 17px;\\n  color: gray;\\n  margin-left: 10px;\\n}\\n\\n.div_content .div_inner .img_visa {\\n  float: right;\\n  position: absolute;\\n  top: 50%;\\n  display: block;\\n  font-size: 17px;\\n  color: gray;\\n  margin-left: 10px;\\n  transform: translateY(-50%);\\n  height: 15px !important;\\n  width: 50px !important;\\n}\\n\\n.btn_addcard {\\n  margin-top: 30px;\\n  --box-shadow: none !important;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc3RyaXBlLXBheW1lbnRzL3N0cmlwZS1wYXltZW50cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBa0I7RUFDbEIsZUFBZTtBQUNuQjs7QUFDQTtFQUNJLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsV0FBVztBQUVmOztBQUFBO0VBQ0ksV0FBVztFQUNYLGtCQUFrQjtFQUNsQixtQkFBbUI7QUFHdkI7O0FBTkE7RUFNUSxXQUFXO0VBQ1gsZ0JBQWdCO0VBQ2hCLG9CQUFvQjtBQUk1Qjs7QUFaQTtFQVdZLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsMkJBQTJCO0FBS3ZDOztBQWxCQTtFQWdCWSxjQUFjO0VBQ2QsZUFBZTtFQUNmLFdBQVc7RUFDWCxpQkFBaUI7QUFNN0I7O0FBekJBO0VBc0JZLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLGNBQWM7RUFDZCxlQUFlO0VBQ2YsV0FBVztFQUNYLGlCQUFpQjtFQUNqQiwyQkFBMkI7RUFDM0IsdUJBQXVCO0VBQ3ZCLHNCQUFzQjtBQU9sQzs7QUFIQTtFQUNJLGdCQUFnQjtFQUNoQiw2QkFBYTtBQU1qQiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3N0cmlwZS1wYXltZW50cy9zdHJpcGUtcGF5bWVudHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJ0bl9yaWdodHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogOTk5OTk5O1xufVxuLmltZ19tZW51e1xuICAgIHdpZHRoOiAxN3B4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMjBweDtcbn1cbi5kaXZfY29udGVudHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgcGFkZGluZy1yaWdodDogMjBweDtcblxuICAgIC5kaXZfaW5uZXJ7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcblxuICAgICAgICAucntcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuICAgICAgICB9XG4gICAgICAgIC5sYmxfbnVtYmVye1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICBmb250LXNpemU6IDE3cHg7XG4gICAgICAgICAgICBjb2xvcjogZ3JheTtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5pbWdfdmlzYXtcbiAgICAgICAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICBmb250LXNpemU6IDE3cHg7XG4gICAgICAgICAgICBjb2xvcjogZ3JheTtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuICAgICAgICAgICAgaGVpZ2h0OiAxNXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB3aWR0aDogNTBweCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgfVxufVxuLmJ0bl9hZGRjYXJke1xuICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgLS1ib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG59Il19 */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { StripePaymentsPage } from './stripe-payments.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StripePaymentsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StripePaymentsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StripePaymentsPageRoutingModule } from './stripe-payments-routing.module';\n\nimport { StripePaymentsPage } from './stripe-payments.page';\nimport { SharedModule } from 'src/app/directives/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    StripePaymentsPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [StripePaymentsPage]\n})\nexport class StripePaymentsPageModule { }\n"]}